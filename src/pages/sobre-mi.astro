---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import MobileMenu from '../components/MobileMenu.astro';
import Footer from '../components/Footer.astro';

const stack = {
  frontend: {
    icon: 'code',
    title: 'Frontend',
    desc: 'Interfaces rápidas con arquitectura escalable.',
    pills: [['Astro', 'React', 'Vue'], ['TypeScript', 'Tailwind', 'GSAP']],
  },
  backend: {
    icon: 'database',
    title: 'Backend & Tools',
    desc: 'Servicios, datos y workflows para shipping continuo.',
    pills: [['Node', 'PHP', 'MongoDB'], ['MySQL', 'Git', 'APIs']],
  },
  design: {
    icon: 'pen-tool',
    title: 'Design',
    desc: 'Sistemas visuales prolijos y consistentes.',
    pills: [['Pencil', 'Figma'], ['Photoshop', 'Illustrator']],
  },
};

const timeline = [
  { num: '1', title: 'Conversación', desc: 'Hablamos de tu proyecto, objetivos y contexto. Entiendo qué necesitás y si encajamos.', tag: 'Call / Brief', icon: 'message' },
  { num: '2', title: 'Propuesta', desc: 'Armo un scope claro con alcance, tiempos y precio. Sin letra chica ni sorpresas.', tag: 'Scope + Quote', icon: 'file' },
  { num: '3', title: 'Diseño + Dev', desc: 'Diseño la interfaz, validamos juntos y lo llevo a código. Avances visibles cada semana.', tag: 'Pencil + Code', icon: 'pen' },
  { num: '4', title: 'Review', desc: 'Revisamos todo en detalle: funcionalidad, responsive, edge cases. Ajustes finales antes de salir.', tag: 'QA + Feedback', icon: 'check' },
  { num: '5', title: 'Entrega', desc: 'Deploy a producción, documentación y handoff limpio. Listo para que lo mantengas o sigamos iterando.', tag: 'Deploy + Docs', icon: 'rocket' },
];
---

<Layout title="Sobre mí — Briar.dev">
  <MobileMenu />
  <Navbar />

  <!-- ─── ABOUT HERO ─── -->
  <section class="bg-[#FAFAF9] max-w-[1440px] mx-auto pt-[88px] pb-10 px-[120px] max-[1024px]:px-6 max-[640px]:px-6 max-[640px]:pt-16 max-[640px]:pb-10">
    <div class="flex flex-col items-center gap-[18px] text-center">
      <span class="font-inter text-[13px] font-medium text-[#AEAEA6] tracking-[2px] max-[640px]:text-[11px] max-[640px]:tracking-[1.5px]">PERFIL</span>
      <h1
        id="page-title"
        class="font-outfit text-[72px] font-light text-[#1A1A1A] tracking-[-3px] leading-tight max-[1024px]:text-[56px] max-[640px]:text-[44px] max-[640px]:tracking-[-1.6px]"
      >
        Sobre mí
      </h1>
      <p class="font-inter text-lg text-[#8A8A82] font-normal leading-[1.45] max-w-[900px] text-center max-[640px]:text-[15px] max-[640px]:max-w-[310px]">
        Diseño y desarrollo sitios web modernos, claros y rápidos.
      </p>
    </div>
  </section>

  <!-- ─── ABOUT MAIN ─── -->
  <section class="bg-[#FAFAF9] max-w-[1440px] mx-auto px-[120px] pb-10 max-[1024px]:px-6 max-[640px]:px-6 reveal">
    <div class="flex items-start gap-10 max-[900px]:flex-col max-[900px]:gap-6">
      <!-- Portrait -->
      <div class="w-[500px] h-[500px] rounded-[20px] border border-[#E8E5E0] overflow-hidden shrink-0 max-[900px]:w-full max-[900px]:h-[300px] max-[640px]:w-[342px] max-[640px]:h-[300px] max-[640px]:mx-auto">
        <img
          src="/images/about-portrait.jpg"
          alt="Mateo García"
          class="w-full h-full object-cover"
          onerror="this.style.display='none'; this.parentElement.style.background='linear-gradient(135deg, #F0EDE7 0%, #E8E5E0 100%)'"
        />
      </div>

      <!-- Right content -->
      <div class="flex flex-col gap-5 flex-1">
        <!-- Quote -->
        <div class="border-l-[3px] border-[#1A1A1A] pl-4">
          <p class="font-outfit text-[20px] font-medium text-[#1A1A1A] tracking-[-0.5px] leading-[1.4]">
            Soy de los detalles, y de la prolijidad.<br />Cada decisión tiene un porqué.
          </p>
        </div>

        <!-- Bio -->
        <div class="flex flex-col gap-4">
          <p class="font-inter text-sm text-[#71716B] leading-[1.6]">
            Soy Mateo García, aunque en internet me conocen como Briar Dev (sí, viene de LoL). Empecé a programar a los 16 con un curso del gobierno, y desde ahí no paré: estudié en Coderhouse y hoy estoy cerrando mi último cuatrimestre en Escuela Da Vinci, donde además estoy becado.
          </p>
          <p class="font-inter text-sm text-[#71716B] leading-[1.6]">
            Trabajo con tecnologías modernas (Astro, Vue/React, Tailwind y TypeScript) y me apoyo en IA como asistente para acelerar sin bajar la calidad. Me ayuda a ordenar ideas, probar variantes y mejorar el contenido sin dar vueltas, para llegar a una web prolija, consistente y lista para salir.
          </p>
          <p class="font-inter text-sm text-[#71716B] leading-[1.6]">
            En mi tiempo libre juego videojuegos, miro fútbol y Fórmula 1, y me gusta mantenerme al día con las novedades de la IA.
          </p>
          <!-- Tags -->
          <div class="flex flex-wrap gap-[10px]">
            {[
              { icon: 'layers', label: 'Full Stack' },
              { icon: 'pencil', label: 'UX / UI' },
              { icon: 'boxes', label: 'Design Systems' },
              { icon: 'globe', label: 'Español / Inglés' },
            ].map((t) => (
              <span class="flex items-center gap-[6px] bg-[#F5F4F0] rounded-full px-3 py-[6px] font-inter text-[11px] font-semibold text-[#71716B] tracking-[0.3px]">
                {t.label}
              </span>
            ))}
          </div>
        </div>

        <!-- CTAs -->
        <div class="flex items-center gap-[14px] max-[640px]:flex-col max-[640px]:w-full">
          <a
            href="/proyectos"
            class="flex items-center gap-[10px] bg-[#1A1A1A] text-[#FAFAF9] font-inter text-[15px] font-medium px-7 py-[14px] rounded-full hover:opacity-80 transition-opacity max-[640px]:w-full max-[640px]:justify-center"
          >
            Ver proyectos
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </a>
          <a
            href="/cv-mateo-garcia.pdf"
            download
            class="flex items-center gap-[10px] font-inter text-[15px] font-medium text-[#1A1A1A] px-7 py-[14px] rounded-full border border-[#D6D3CE] hover:border-[#1A1A1A] transition-colors max-[640px]:w-full max-[640px]:justify-center"
          >
            Descargá CV
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ─── STACK SECTION ─── -->
  <section class="max-w-[1440px] mx-auto px-[120px] max-[1024px]:px-6 max-[640px]:px-6 reveal">
    <div>
      <div class="flex flex-col gap-7 border-t border-[#E8E5E0] pt-10 pb-10 max-[640px]:pt-8 max-[640px]:pb-8">
        <span class="font-inter text-[13px] font-medium text-[#AEAEA6] tracking-[2px]">MI STACK</span>
        <h2 class="font-outfit text-[28px] font-light text-[#1A1A1A] tracking-[-0.8px] leading-[1.3] max-[640px]:text-[22px]">
          Las herramientas con las que diseño, construyo y escalo.
        </h2>

        <!-- Stack columns -->
        <div class="grid grid-cols-3 gap-4 max-[900px]:grid-cols-1 max-[640px]:gap-3">
          <!-- Frontend -->
          <div class="bg-[#F5F4F0] rounded-[16px] p-6 border border-[#E8E5E0] flex flex-col gap-[18px]">
            <div class="flex flex-col gap-3">
              <div class="w-[38px] h-[38px] bg-white border border-[#E8E5E0] rounded-[12px] flex items-center justify-center">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>
                </svg>
              </div>
              <span class="font-outfit text-[20px] font-semibold text-[#1A1A1A] tracking-[-0.3px]">Frontend</span>
              <p class="font-inter text-xs text-[#8A8A82] leading-[1.5]">Interfaces rápidas con arquitectura escalable.</p>
            </div>
            <div class="flex flex-col gap-2">
              <div class="flex flex-wrap gap-2">
                {['Astro', 'React', 'Vue'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
              <div class="flex flex-wrap gap-2">
                {['TypeScript', 'Tailwind', 'GSAP'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
            </div>
          </div>

          <!-- Backend -->
          <div class="bg-[#F5F4F0] rounded-[16px] p-6 border border-[#E8E5E0] flex flex-col gap-[18px]">
            <div class="flex flex-col gap-3">
              <div class="w-[38px] h-[38px] bg-white border border-[#E8E5E0] rounded-[12px] flex items-center justify-center">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <ellipse cx="12" cy="5" rx="9" ry="3"/>
                  <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                  <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                </svg>
              </div>
              <span class="font-outfit text-[20px] font-semibold text-[#1A1A1A] tracking-[-0.3px]">Backend & Tools</span>
              <p class="font-inter text-xs text-[#8A8A82] leading-[1.5]">Servicios, datos y workflows para shipping continuo.</p>
            </div>
            <div class="flex flex-col gap-2">
              <div class="flex flex-wrap gap-2">
                {['Node', 'PHP', 'MongoDB'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
              <div class="flex flex-wrap gap-2">
                {['MySQL', 'Git', 'APIs'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
            </div>
          </div>

          <!-- Design -->
          <div class="bg-[#F5F4F0] rounded-[16px] p-6 border border-[#E8E5E0] flex flex-col gap-[18px]">
            <div class="flex flex-col gap-3">
              <div class="w-[38px] h-[38px] bg-white border border-[#E8E5E0] rounded-[12px] flex items-center justify-center">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                  <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                  <path d="M2 2l7.586 7.586"/>
                  <circle cx="11" cy="11" r="2"/>
                </svg>
              </div>
              <span class="font-outfit text-[20px] font-semibold text-[#1A1A1A] tracking-[-0.3px]">Design</span>
              <p class="font-inter text-xs text-[#8A8A82] leading-[1.5]">Sistemas visuales prolijos y consistentes.</p>
            </div>
            <div class="flex flex-col gap-2">
              <div class="flex flex-wrap gap-2">
                {['Pencil', 'Figma'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
              <div class="flex flex-wrap gap-2">
                {['Photoshop', 'Illustrator'].map((p) => (
                  <span class="font-inter text-xs font-medium text-[#4A4A48] bg-white border border-[#E8E5E0] rounded-full px-[14px] py-[7px]">{p}</span>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ─── TIMELINE SECTION ─── -->
  <section class="max-w-[1440px] mx-auto px-[120px] max-[1024px]:px-6 max-[640px]:px-6 reveal">
    <div class="border-t border-[#E8E5E0] pt-10 flex flex-col gap-8 max-[640px]:pt-8">
      <div class="flex flex-col gap-3">
        <span class="font-inter text-[13px] font-medium text-[#AEAEA6] tracking-[2px]">MI PROCESO</span>
        <h2 class="font-outfit text-[34px] font-light text-[#1A1A1A] tracking-[-1px] leading-[1.2] max-[640px]:text-[26px] max-[640px]:tracking-[-0.6px]">
          Como trabajo un proyecto, de punta a punta.
        </h2>
        <p class="font-inter text-[15px] text-[#71716B] leading-[1.5]">
          Del primer mensaje a la entrega final, con etapas claras y avances visibles.
        </p>
      </div>

      <!-- Desktop timeline (dots + lines) -->
      <div class="hidden md:flex items-center mb-2">
        {timeline.map((step, i) => (
          <>
            <div class="timeline-dot w-10 h-10 rounded-full bg-[#1A1A1A] flex items-center justify-center shrink-0">
              <span class="font-inter text-sm font-bold text-[#FAFAF9]">{step.num}</span>
            </div>
            {i < timeline.length - 1 && (
              <div class="timeline-line flex-1 h-0.5 bg-[#E8E5E0] rounded"></div>
            )}
          </>
        ))}
      </div>

      <!-- Timeline content: desktop grid -->
      <div class="hidden md:grid grid-cols-5 gap-5">
        {timeline.map((step) => (
          <div class="flex flex-col gap-2">
            <span class="font-outfit text-base font-semibold text-[#1A1A1A] tracking-[-0.3px]">{step.title}</span>
            <p class="font-inter text-xs text-[#71716B] leading-[1.55]">{step.desc}</p>
            <span class="inline-flex items-center gap-[6px] bg-[#F5F4F0] rounded-full px-[10px] py-[5px] self-start font-inter text-[10px] font-semibold text-[#8A8A82] tracking-[0.3px]">
              {step.tag}
            </span>
          </div>
        ))}
      </div>

      <!-- Mobile timeline: stacked cards -->
      <div class="flex flex-col gap-3 md:hidden">
        {timeline.map((step) => (
          <div class="bg-[#F5F4F0] rounded-[14px] p-4 border border-[#E8E5E0] flex flex-col gap-[10px]">
            <div class="flex items-center gap-3">
              <span class="w-8 h-8 rounded-full bg-[#1A1A1A] flex items-center justify-center font-inter text-sm font-bold text-[#FAFAF9] shrink-0">
                {step.num}
              </span>
              <span class="font-outfit text-base font-semibold text-[#1A1A1A] tracking-[-0.3px]">{step.title}</span>
            </div>
            <p class="font-inter text-xs text-[#71716B] leading-[1.55]">{step.desc}</p>
            <span class="inline-flex items-center gap-[6px] bg-white rounded-full px-[10px] py-[5px] self-start font-inter text-[10px] font-semibold text-[#8A8A82] tracking-[0.3px] border border-[#E8E5E0]">
              {step.tag}
            </span>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ─── END CTA (dark) ─── -->
  <section class="bg-[#1A1A1A] max-w-[1440px] mx-auto px-[120px] py-[72px] border-t border-[#2A2A2A] mt-10 reveal max-[1024px]:px-6 max-[640px]:py-14">
    <div class="flex items-end justify-between max-[900px]:flex-col max-[900px]:items-start max-[900px]:gap-8">
      <div class="flex flex-col gap-[14px] max-w-[760px]">
        <span class="font-inter text-[13px] font-medium text-[#71716B] tracking-[2px]">SIGUIENTE PASO</span>
        <h2 class="font-outfit text-[46px] font-light text-[#FAFAF9] tracking-[-1.6px] leading-[1.15] max-[640px]:text-[28px] max-[640px]:tracking-[-0.6px]">
          ¿Tenés un proyecto en mente?
        </h2>
        <p class="font-inter text-[17px] text-[#A6A6A0] leading-[1.6] max-[640px]:text-base">
          Contame la idea y lo vemos juntos. Te respondo en menos de 24 hs.
        </p>
      </div>
      <a
        href="/contacto"
        class="flex items-center gap-[10px] bg-[#FAFAF9] text-[#1A1A1A] font-inter text-[15px] font-medium px-7 py-[14px] rounded-full hover:opacity-80 transition-opacity shrink-0 max-[640px]:w-full max-[640px]:justify-center"
      >
        Contactame
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <line x1="5" y1="12" x2="19" y2="12"/>
          <polyline points="12 5 19 12 12 19"/>
        </svg>
      </a>
    </div>
  </section>

  <Footer />
</Layout>

<script>
  import gsap from 'gsap';
  import ScrollTrigger from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  gsap.fromTo(
    '#page-title',
    { opacity: 0, y: 30 },
    { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out', delay: 0.3 }
  );

  // Animate timeline dots
  gsap.fromTo(
    '.timeline-dot',
    { scale: 0, opacity: 0 },
    {
      scale: 1,
      opacity: 1,
      stagger: 0.1,
      duration: 0.5,
      ease: 'back.out(1.7)',
      scrollTrigger: {
        trigger: '.timeline-dot',
        start: 'top 85%',
        once: true,
      },
    }
  );

  gsap.fromTo(
    '.timeline-line',
    { scaleX: 0, transformOrigin: 'left center' },
    {
      scaleX: 1,
      stagger: 0.1,
      duration: 0.4,
      ease: 'power2.out',
      delay: 0.3,
      scrollTrigger: {
        trigger: '.timeline-line',
        start: 'top 85%',
        once: true,
      },
    }
  );

  gsap.utils.toArray<HTMLElement>('.reveal').forEach((el) => {
    gsap.fromTo(
      el,
      { opacity: 0, y: 32 },
      {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: 'power2.out',
        scrollTrigger: {
          trigger: el,
          start: 'top 85%',
          once: true,
        },
      }
    );
  });
</script>
